{"level":"info","message":"Initializing Draft Service...","timestamp":"2025-06-23T21:34:35.084Z"}
{"level":"info","message":"Connected to Substrate node: ws://localhost:9944","timestamp":"2025-06-23T21:34:35.159Z"}
{"level":"info","message":"Service account initialized: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY","timestamp":"2025-06-23T21:34:35.171Z"}
{"level":"info","message":"Contract ABI loaded from: /Users/martinhalford/Development/halfordit/concerto-codegen-rust/inkathon/contracts/deployments/late-delivery-and-penalty/late-delivery-and-penalty.json","timestamp":"2025-06-23T21:34:35.174Z"}
{"level":"info","message":"Contract initialized: 5FL81Ugr5Fp8bhPThxNRNdKkykvSnSDwWDmjZDLSvSDuaQMB","timestamp":"2025-06-23T21:34:35.180Z"}
{"level":"info","message":"Documents directory initialized: ./generated-documents","timestamp":"2025-06-23T21:34:35.180Z"}
{"level":"error","message":"Failed to initialize template: Failed to load model file. Job: https://models.accordproject.org/time@0.3.0.cto Details: TypeError: fetch failed","stack":"Error: Failed to load model file. Job: https://models.accordproject.org/time@0.3.0.cto Details: TypeError: fetch failed\n    at t.PromisePoolExecutor.i [as errorHandler] (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:271398)\n    at /Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1384518\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Promise.all (index 1)\n    at async t.PromisePoolExecutor.drainActiveTasks (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1384777)\n    at async t.PromisePoolExecutor.drained (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1384680)\n    at async t.PromisePoolExecutor.start (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1383436)\n    at async e.exports.updateExternalModels (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:5631)\n    at async m.fromDirectory (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1985905)\n    at async DraftService.initializeTemplate (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:119:23)\n    at async DraftService.initialize (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:80:7)\n    at async DraftService.start (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:135:7)\n    at async main (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:622:5)","timestamp":"2025-06-23T21:34:35.506Z"}
{"level":"info","message":"Initializing Draft Service...","timestamp":"2025-06-23T21:38:43.848Z"}
{"level":"info","message":"Connected to Substrate node: ws://localhost:9944","timestamp":"2025-06-23T21:38:43.909Z"}
{"level":"info","message":"Service account initialized: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY","timestamp":"2025-06-23T21:38:43.921Z"}
{"level":"info","message":"Contract ABI loaded from: /Users/martinhalford/Development/halfordit/concerto-codegen-rust/inkathon/contracts/deployments/late-delivery-and-penalty/late-delivery-and-penalty.json","timestamp":"2025-06-23T21:38:43.921Z"}
{"level":"info","message":"Contract initialized: 5C6u9c9e1RdzzdDAGQRKZBhsiAdMK1BCsy8qTsZUY2YhNQqS","timestamp":"2025-06-23T21:38:43.927Z"}
{"level":"info","message":"Documents directory initialized: ./generated-documents","timestamp":"2025-06-23T21:38:43.927Z"}
{"level":"error","message":"Failed to initialize template: Empty script contents","stack":"Error: Empty script contents\n    at new e.exports (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1974553)\n    at e.exports.createScript (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1989610)\n    at e.exports.addLogicFile (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1969263)\n    at /Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986410\n    at Array.forEach (<anonymous>)\n    at m.fromDirectory (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986312)\n    at async DraftService.initializeTemplate (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:119:23)\n    at async DraftService.initialize (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:80:7)\n    at async DraftService.start (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:135:7)\n    at async main (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:622:5)","timestamp":"2025-06-23T21:39:04.098Z"}
{"level":"info","message":"Initializing Draft Service...","timestamp":"2025-06-23T21:45:08.427Z"}
{"level":"info","message":"Connected to Substrate node: ws://localhost:9944","timestamp":"2025-06-23T21:45:08.485Z"}
{"level":"info","message":"Service account initialized: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY","timestamp":"2025-06-23T21:45:08.497Z"}
{"level":"info","message":"Contract ABI loaded from: /Users/martinhalford/Development/halfordit/concerto-codegen-rust/inkathon/contracts/deployments/late-delivery-and-penalty/late-delivery-and-penalty.json","timestamp":"2025-06-23T21:45:08.499Z"}
{"level":"info","message":"Contract initialized: 5C6u9c9e1RdzzdDAGQRKZBhsiAdMK1BCsy8qTsZUY2YhNQqS","timestamp":"2025-06-23T21:45:08.505Z"}
{"level":"info","message":"Documents directory initialized: ./generated-documents","timestamp":"2025-06-23T21:45:08.505Z"}
{"level":"error","message":"Failed to initialize template: Empty script contents","stack":"Error: Empty script contents\n    at new e.exports (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1974553)\n    at e.exports.createScript (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1989610)\n    at e.exports.addLogicFile (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1969263)\n    at /Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986410\n    at Array.forEach (<anonymous>)\n    at m.fromDirectory (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986312)\n    at async DraftService.initializeTemplate (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:128:23)\n    at async DraftService.initialize (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:80:7)\n    at async DraftService.start (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:149:7)\n    at async main (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:636:5)","timestamp":"2025-06-23T21:45:16.797Z"}
{"level":"info","message":"Initializing Draft Service...","timestamp":"2025-06-23T21:47:44.793Z"}
{"level":"info","message":"Connected to Substrate node: ws://localhost:9944","timestamp":"2025-06-23T21:47:44.854Z"}
{"level":"info","message":"Service account initialized: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY","timestamp":"2025-06-23T21:47:44.865Z"}
{"level":"info","message":"Contract ABI loaded from: /Users/martinhalford/Development/halfordit/concerto-codegen-rust/inkathon/contracts/deployments/late-delivery-and-penalty/late-delivery-and-penalty.json","timestamp":"2025-06-23T21:47:44.866Z"}
{"level":"info","message":"Contract initialized: 5C6u9c9e1RdzzdDAGQRKZBhsiAdMK1BCsy8qTsZUY2YhNQqS","timestamp":"2025-06-23T21:47:44.872Z"}
{"level":"info","message":"Documents directory initialized: ./generated-documents","timestamp":"2025-06-23T21:47:44.872Z"}
{"level":"error","message":"Failed to initialize template: Empty script contents","stack":"Error: Empty script contents\n    at new e.exports (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1974553)\n    at e.exports.createScript (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1989610)\n    at e.exports.addLogicFile (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1969263)\n    at /Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986410\n    at Array.forEach (<anonymous>)\n    at m.fromDirectory (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986312)\n    at async DraftService.initializeTemplate (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:120:23)\n    at async DraftService.initialize (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:80:7)\n    at async DraftService.start (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:136:7)\n    at async main (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:623:5)","timestamp":"2025-06-23T21:47:51.375Z"}
{"level":"info","message":"Initializing Draft Service...","timestamp":"2025-06-23T21:48:48.221Z"}
{"level":"info","message":"Connected to Substrate node: ws://localhost:9944","timestamp":"2025-06-23T21:48:48.284Z"}
{"level":"info","message":"Service account initialized: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY","timestamp":"2025-06-23T21:48:48.296Z"}
{"level":"info","message":"Contract ABI loaded from: /Users/martinhalford/Development/halfordit/concerto-codegen-rust/inkathon/contracts/deployments/late-delivery-and-penalty/late-delivery-and-penalty.json","timestamp":"2025-06-23T21:48:48.297Z"}
{"level":"info","message":"Contract initialized: 5C6u9c9e1RdzzdDAGQRKZBhsiAdMK1BCsy8qTsZUY2YhNQqS","timestamp":"2025-06-23T21:48:48.303Z"}
{"level":"info","message":"Documents directory initialized: ./generated-documents","timestamp":"2025-06-23T21:48:48.303Z"}
{"level":"error","message":"Failed to initialize template: Empty script contents","stack":"Error: Empty script contents\n    at new e.exports (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1974553)\n    at e.exports.createScript (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1989610)\n    at e.exports.addLogicFile (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1969263)\n    at /Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986410\n    at Array.forEach (<anonymous>)\n    at m.fromDirectory (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/node_modules/@accordproject/cicero-core/dist/cicero-core.js:2:1986312)\n    at async DraftService.initializeTemplate (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:120:23)\n    at async DraftService.initialize (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:80:7)\n    at async DraftService.start (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:136:7)\n    at async main (/Users/martinhalford/Development/halfordit/concerto-codegen-rust/draft-service/src/index.js:623:5)","timestamp":"2025-06-23T21:48:54.056Z"}
{"level":"info","message":"Initializing Draft Service...","timestamp":"2025-06-23T21:49:45.020Z"}
{"level":"info","message":"Connected to Substrate node: ws://localhost:9944","timestamp":"2025-06-23T21:49:45.082Z"}
{"level":"info","message":"Service account initialized: 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY","timestamp":"2025-06-23T21:49:45.094Z"}
{"level":"info","message":"Contract ABI loaded from: /Users/martinhalford/Development/halfordit/concerto-codegen-rust/inkathon/contracts/deployments/late-delivery-and-penalty/late-delivery-and-penalty.json","timestamp":"2025-06-23T21:49:45.094Z"}
{"level":"info","message":"Contract initialized: 5C6u9c9e1RdzzdDAGQRKZBhsiAdMK1BCsy8qTsZUY2YhNQqS","timestamp":"2025-06-23T21:49:45.100Z"}
{"level":"info","message":"Documents directory initialized: ./generated-documents","timestamp":"2025-06-23T21:49:45.100Z"}
{"level":"info","message":"Template loaded from: /Users/martinhalford/Development/halfordit/concerto-codegen-rust/archives/latedeliveryandpenalty","timestamp":"2025-06-23T21:49:45.294Z"}
{"level":"info","message":"Draft Service initialization complete","timestamp":"2025-06-23T21:49:45.294Z"}
{"level":"info","message":"Starting to listen for DraftRequested events...","timestamp":"2025-06-23T21:49:45.294Z"}
{"level":"info","message":"Draft Service started successfully","timestamp":"2025-06-23T21:49:45.301Z"}
{"level":"info","message":"Draft Service is running...","timestamp":"2025-06-23T21:49:45.301Z"}
{"level":"info","message":"Health server running on port 3001","timestamp":"2025-06-23T21:49:45.301Z"}
{"level":"debug","message":"Event received: system.ExtrinsicSuccess","timestamp":"2025-06-23T21:49:45.301Z"}
{"level":"debug","message":"Event received: system.ExtrinsicSuccess","timestamp":"2025-06-23T21:52:36.037Z"}
{"level":"debug","message":"Event received: contracts.ContractEmitted","timestamp":"2025-06-23T21:52:36.037Z"}
{"level":"debug","message":"ContractEmitted event detected","timestamp":"2025-06-23T21:52:36.037Z"}
{"contract":"5C6u9c9e1RdzzdDAGQRKZBhsiAdMK1BCsy8qTsZUY2YhNQqS","data":"0xf62d927d83fcc9585424c2898bca58f1c7e756488410ce662bae03f01669f1500100000000000000fd057b2224636c617373223a22696f2e636c617573652e6c61746564656c6976657279616e6470656e616c747940302e312e302e4c61746544656c6976657279416e6450656e616c7479222c22636c617573654964223a226c6174652d64656c69766572792d636c617573652d31222c22666f7263654d616a65757265223a747275652c2270656e616c74794475726174696f6e223a7b2224636c617373223a226f72672e6163636f726470726f6a6563742e74696d6540302e332e302e4475726174696f6e222c22616d6f756e74223a332c22756e6974223a2264617973227d2c2270656e616c747950657263656e74616765223a31322e352c2263617050657263656e74616765223a36302c227465726d696e6174696f6e223a7b2224636c617373223a226f72672e6163636f726470726f6a6563742e74696d6540302e332e302e4475726174696f6e222c22616d6f756e74223a32302c22756e6974223a2264617973227d2c226672616374696f6e616c50617274223a2264617973227da160c79e97010000","level":"debug","message":"Event data:","timestamp":"2025-06-23T21:52:36.037Z"}
{"level":"debug","message":"Contract address:","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"debug","message":"Raw hex data:","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"debug","message":"Full human data:","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"info","message":"Event is from our contract, parsing hex data...","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"debug","message":"Buffer as string (first 200 chars):","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"debug","message":"Buffer length:","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"debug","message":"Looking for JSON pattern...","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"debug","message":"JSON start position:","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"info","message":"Successfully extracted template data!","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"debug","message":"Template JSON:","timestamp":"2025-06-23T21:52:36.038Z"}
{"level":"info","message":"Processing draft request 1750715556038 from 5C6u9c9e1RdzzdDAGQRKZBhsiAdMK1BCsy8qTsZUY2YhNQqS","timestamp":"2025-06-23T21:52:36.039Z"}
{"level":"debug","message":"Event received: contracts.Called","timestamp":"2025-06-23T21:52:36.098Z"}
{"level":"debug","message":"Event received: contracts.StorageDepositTransferredAndHeld","timestamp":"2025-06-23T21:52:36.098Z"}
{"level":"debug","message":"Event received: transactionPayment.TransactionFeePaid","timestamp":"2025-06-23T21:52:36.098Z"}
{"level":"debug","message":"Event received: system.ExtrinsicSuccess","timestamp":"2025-06-23T21:52:36.098Z"}
{"level":"info","message":"Draft generated and saved to: generated-documents/contract-1750715556038-1750715557091.md","timestamp":"2025-06-23T21:52:37.091Z"}
{"level":"info","message":"Document accessible at: http://localhost:3001/documents/contract-1750715556038-1750715557091.md","timestamp":"2025-06-23T21:52:37.091Z"}
{"level":"debug","message":"Event received: system.ExtrinsicSuccess","timestamp":"2025-06-23T21:52:42.024Z"}
{"level":"debug","message":"Event received: transactionPayment.TransactionFeePaid","timestamp":"2025-06-23T21:52:42.024Z"}
{"level":"debug","message":"Event received: system.ExtrinsicFailed","timestamp":"2025-06-23T21:52:42.024Z"}
{"level":"info","message":"Draft result submitted for request 1750715556038: 0x7a3c2a677ca581ebca5a14a8b2a556d29eff5a48f7948fddd70fb955d8dfc25a","timestamp":"2025-06-23T21:52:42.035Z"}
{"level":"debug","message":"Event received: system.ExtrinsicSuccess","timestamp":"2025-06-23T21:52:48.020Z"}
{"level":"info","message":"Draft result finalized for request 1750715556038: 0x7a3c2a677ca581ebca5a14a8b2a556d29eff5a48f7948fddd70fb955d8dfc25a","timestamp":"2025-06-23T21:52:54.791Z"}
